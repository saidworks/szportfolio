@inherits LayoutComponentBase
@inject IAuthenticationService AuthService

<div class="admin-layout">
    <AuthorizeView Roles="Admin">
        <Authorized>
            <!-- Admin Sidebar -->
            <div class="admin-sidebar bg-dark text-white">
                <div class="sidebar-header p-3 border-bottom border-secondary">
                    <h4>Admin Panel</h4>
                    <p class="mb-0 small">@context.User.Identity?.Name</p>
                </div>
                <nav class="sidebar-nav">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <NavLink class="nav-link text-white" href="/admin" Match="NavLinkMatch.All">
                                <i class="bi bi-speedometer2"></i> Dashboard
                            </NavLink>
                        </li>
                        <li class="nav-item">
                            <NavLink class="nav-link text-white" href="/admin/articles">
                                <i class="bi bi-file-text"></i> Articles
                            </NavLink>
                        </li>
                        <li class="nav-item">
                            <NavLink class="nav-link text-white" href="/admin/comments">
                                <i class="bi bi-chat-dots"></i> Comments
                            </NavLink>
                        </li>
                        <li class="nav-item">
                            <NavLink class="nav-link text-white" href="/admin/projects">
                                <i class="bi bi-folder"></i> Projects
                            </NavLink>
                        </li>
                        <li class="nav-item">
                            <NavLink class="nav-link text-white" href="/admin/media">
                                <i class="bi bi-images"></i> Media
                            </NavLink>
                        </li>
                        <li class="nav-item mt-3 pt-3 border-top border-secondary">
                            <a class="nav-link text-white" href="/">
                                <i class="bi bi-house"></i> View Site
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/logout">
                                <i class="bi bi-box-arrow-right"></i> Logout
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Admin Content -->
            <div class="admin-content">
                <div class="container-fluid py-4">
                    @Body
                </div>
            </div>
        </Authorized>
        <NotAuthorized>
            <div class="container text-center py-5">
                <h2>Access Denied</h2>
                <p>You need to be logged in as an administrator to access this page.</p>
                <a href="/login" class="btn btn-primary">Login</a>
            </div>
        </NotAuthorized>
    </AuthorizeView>
</div>

<style>
    .admin-layout {
        display: flex;
        min-height: 100vh;
    }

    .admin-sidebar {
        width: 250px;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
    }

    .admin-content {
        margin-left: 250px;
        flex: 1;
        background-color: #f8f9fa;
    }

    .sidebar-nav .nav-link {
        padding: 0.75rem 1rem;
        border-radius: 0;
    }

    .sidebar-nav .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .sidebar-nav .nav-link.active {
        background-color: rgba(255, 255, 255, 0.2);
    }
</style>
